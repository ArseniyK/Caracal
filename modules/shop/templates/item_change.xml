<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document SYSTEM "../../../units/schema/template.dtd">
<document>
	<form action="$params['form_action']" eval="action" method="POST" id="shop_item_change_form">
		<div id="shop_change_item_notebook">
			<div>
				<label>
					<input type="hidden" name="id" value="$params['id']" eval="value"/>
					<span><_text constant="label_name" module="shop"/></span>
					<input type="text" class="multi-language" name="name" style="width: 270px;" maxlength="30"/>
					<_language_data param="name"/>
				</label>
				<label>
					<span><_text constant="label_description" module="shop"/></span>
					<textarea name="description" class="multi-language" style="width: 460px; height: 155px;"/>
					<_language_data param="description"/>
				</label>
				<div class="box left" style="width: 120px;">
					<label>
						<span><_text constant="label_price" module="shop"/></span>
						<input 
							type="text" 
							name="price" 
							value="$params['price']"
							eval="value"
							style="width: 100px;" 
							maxlength="30"
						/>
					</label>
				</div>
				<div class="box left" style="width: 120px;">
					<label>
						<span><_text constant="label_size_definition" module="shop"/></span>
						<select name="size_definition" style="width: 200px;">
							<option></option>
							<_size_list 
								template="size_option.xml"
								local="1"
								selected="$params['size_definition']"
								eval="selected"
							/>
						</select>
					</label>
				</div>
				<div style="clear: both; padding-top: 10px;">
					<div class="box left" style="width: 120px;">
						<label>
							<span><_text constant="label_tax" module="shop"/></span>
							<input name="tax" value="$params['tax']" style="width: 100px;" eval="value"/>
						</label>
					</div>
					<div class="box left">
						<label>
							<span><_text constant="label_weight" module="shop"/></span>
							<input name="weight" value="$params['weight']" style="width: 100px;" eval="value"/>
						</label>
					</div>
				</div>
				<div style="clear: both; padding-top: 10px; padding-bottom: 25px;">
					<_text constant="message_images_upload" module="shop"/>
				</div>
			</div>

			<div class="scrollable_list">
				<input name="colors" type="hidden" value="$params['colors']" eval="value"/>
				<label class="inline">
					<span><_text constant="label_color_value" module="shop"/></span>
					<input name="color_value" class="code" type="text" style="width: 60px"/>
				</label>
				<label class="inline">
					<span><_text constant="label_color_name" module="shop"/></span>
					<input name="color_name" type="text"/>
					<button type="button" onclick="javascript: shop_AddColor();">
						<_text constant="add"/>
					</button>
				</label>
				<div class="list_header">
					<span class="column" style="width: 250px;">
						<_text constant="column_color_name" module="shop"/>
					</span>
					<span class="column" style="width: 100px;">
						<_text constant="column_color_value" module="shop"/>
					</span>
					<span class="column">
						<_text constant="column_options"/>
					</span>
				</div>
				<div class="list_content" style="height: 340px" id="color_list">
				</div>
			</div>

			<div class="scrollable_list">
				<div class="list_header">
					<_text constant="label_categories" module="shop"/>
				</div>
				<div class="list_content" style="height: 350px">
					<_category_list
						template="category_checkbox_list_item.xml" 
						local="1"
						item_id="$params['id']"
						eval="item_id"
					/>
				</div>
			</div>

			<div class="scrollable_list">
				<label class="inline">
					<span><_text constant="label_search_query" module="shop"/></span>
					<input name="search_query" type="text"/>
					<button 
						type="button"
						onclick="javascript: shop_OpenItemSearch();"
					>
						<_text constant="search"/>
					</button>
				</label>
				<div class="list_header">
					<span class="column" style="width: 250px;">
						<_text constant="column_name" module="shop"/>
					</span>
					<span class="column" style="width: 60px;">
						<_text constant="column_price" module="shop"/>
					</span>
					<span class="column" style="width: 50px;">
						<_text constant="column_rating" module="shop"/>
					</span>
					<span class="column">
						<_text constant="column_options"/>
					</span>
				</div>
				<div class="list_content" style="height: 340px" id="related_items">
					<_item_list
						related="$params['id']"
						eval="related"
						template="item_list_option.xml"
						local="1"
					/>
				</div>
			</div>
		</div>
		
		<div class="button_bar">
			<button type="submit"><_text constant="save"/></button>
			<button type="reset"><_text constant="reset"/></button>
			<button type="button" onclick="$params['cancel_action']" eval="onclick">
				<_text constant="cancel"/>
			</button>
		</div>
	</form>
	<script type="text/javascript">
		var backend_url = window.location.protocol + '//' + window.location.host + window.location.pathname;
		var selector = new LanguageSelector('shop_item_change_form');
		var notebook = new Notebook('shop_change_item_notebook');

		notebook
			.setPageTitle(0, language_handler.getText('shop', 'tab_item'))
			.setPageTitle(1, language_handler.getText('shop', 'tab_colors'))
			.setPageTitle(2, language_handler.getText('shop', 'tab_category'))
			.setPageTitle(3, language_handler.getText('shop', 'tab_related'));

		// add colors
		$('input[name=color_value]').miniColors();
		shop_ParseColors();

		// create toolbar
		toolbar_api
				.createToolbar('shop_item_change_form', '[name=description]:input')
				.addControl('common', 'markdown')
				.addControl('gallery', 'article_image')
				.addControl('downloads', 'link');
	</script>
</document>
